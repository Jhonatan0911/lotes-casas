<div class="d-flex justify-content-between">
  <h2 class="center primary"> <strong> {{data.label}} nuevo usuario </strong> </h2>

  <span class="example-spacer"></span>
  <button type="button" class="h4"mat-icon-button (click)="onClose()">
    <mat-icon aria-label="Side nav toggle icon">close</mat-icon>
  </button>
</div>
<form (ngSubmit)="submit()" [formGroup]="form">
  <div class="row mb-3">
    <div class="col-12 col-md-6">
      <mat-form-field class="w-100" appearance="outline">
        <mat-label>Nombre</mat-label>
        <input type="text" matInput formControlName="NombreCompleto" maxlength="50" required>
        <mat-error *ngIf="validate('NombreCompleto')">
          {{ check('NombreCompleto') }}
        </mat-error>
      </mat-form-field>
    </div>
    <div class="col-12 col-md-6">
      <mat-form-field class="w-100" appearance="outline">
        <mat-label>Rol</mat-label>
        <mat-select  matNativeControl formControlName="PerfilId" required>
          <mat-option *ngFor="let item of perfiles" [value]="item.Id"> {{item.Descripcion}} </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </div>
  <div class="row mb-3">
    <div class="col-12 col-md-6">
      <mat-form-field class="w-100" appearance="outline">
        <mat-label>Usuario</mat-label>
        <input type="text" matInput formControlName="Usuario" maxlength="10" required>
        <mat-error *ngIf="validate('Usuario')">
          {{ check('Usuario') }}
        </mat-error>
      </mat-form-field>
    </div>
    <div class="col-12 col-md-6">
      <mat-form-field class="w-100" appearance="outline">
        <mat-label>Correo</mat-label>
        <input type="email" matInput formControlName="Correo" maxlength="50" required>
        <mat-error *ngIf="validate('Correo')">
          {{ check('Correo') }}
        </mat-error>
      </mat-form-field>
    </div>
  </div>
  <div class="row mb-3">
    <div class="col-12 col-md-6">
      <mat-form-field class="w-100" appearance="outline">
        <mat-label>Contraseña</mat-label>
        <input [type]="hidePassword ? 'password' : 'text'" matInput formControlName="Clave" minlength="6" required>
        <mat-error *ngIf="validate('Clave')">
          {{ check('Clave') }}
        </mat-error>
        <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword" [attr.aria-label]="'Hide password'"
        [attr.aria-pressed]="hidePassword">
          <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
        </button>
      </mat-form-field>
    </div>
    <div class="col-12 col-md-6">
      <mat-form-field class="w-100" appearance="outline">
        <mat-label>Confirmar contraseña</mat-label>
        <input [type]="hidePassword2 ? 'password' : 'text'" matInput formControlName="Clave2" minlength="6" required>
        <mat-error *ngIf="validate('Clave2')">
          {{ check('Clave2') }}
        </mat-error>
        <button mat-icon-button matSuffix (click)="hidePassword2 = !hidePassword2" [attr.aria-label]="'Hide password'"
        [attr.aria-pressed]="hidePassword2">
          <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
        </button>
      </mat-form-field>
    </div>
  </div>
  <button mat-flat-button class="w-100 btn-primary" [disabled]="!form.valid || loading" type="submit">{{data.editMode ? "Editar" : "Guardar"}}</button>
</form>
<button mat-flat-button class="w-100 btn-danger mt-3" (click)="eliminar()" [disabled]="loading" *ngIf="data.editMode">{{!loadingMain ? "Eliminar" : "Eliminando"}}</button>
